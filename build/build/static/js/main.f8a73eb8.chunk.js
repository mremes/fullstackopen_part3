(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,n,t){e.exports=t(40)},38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(11),u=t.n(o),c=t(12),i=t(2),l=function(e){var n=e.handler;return r.a.createElement("div",null,r.a.createElement("form",null,"rajaa n\xe4ytett\xe4vi\xe4: ",r.a.createElement("input",{onChange:n})))},s=function(e){var n=e.formHandler,t=e.name,a=e.nameHandler,o=e.phoneNum,u=e.phoneNumHandler;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:t,onChange:a})," ",r.a.createElement("br",null),"puhelinnumero: ",r.a.createElement("input",{value:o,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},m=function(e){var n=e.persons,t=e.deleteHandler;return r.a.createElement("div",null,n.map(function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.phone," ",r.a.createElement("button",{id:e.id,onClick:t},"poista"))}))},f=t(3),d=t.n(f),h=function(e){return"".concat("/api/persons","/").concat(e)},p=function(e){return d.a.post("/api/persons",e).then(function(e){return e.data})},v=function(e){return d.a.put(h(e.id),e).then(function(e){return e.data})},E=function(e){var n=e.message,t=e.handler,a=e.className;return""===n?null:(setTimeout(function(){return t("")},3e3),r.a.createElement("div",{className:a},n))},b=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),f=Object(i.a)(u,2),b=f[0],g=f[1],j=Object(a.useState)(""),O=Object(i.a)(j,2),w=O[0],H=O[1],k=Object(a.useState)(""),N=Object(i.a)(k,2),S=N[0],C=N[1],y=Object(a.useState)(""),L=Object(i.a)(y,2),J=L[0],P=L[1],T=Object(a.useState)(""),x=Object(i.a)(T,2),A=x[0],B=x[1];Object(a.useEffect)(function(){return d.a.get("/api/persons").then(function(e){return e.data}).then(function(e){return o(e)})},[]);var D=function(e,n,t){e(t).then(function(e){o(n.concat(t).sort(function(e,n){return e.id-n.id})),g(""),H("")}).catch(function(e){return console.log(e)})},I=t.filter(function(e){return e.name.toLowerCase().startsWith(S)});return I.forEach(function(e){return e.phone=e.phone||"N/A"}),r.a.createElement("div",null,r.a.createElement("h2",null,"puhelinluettelo"),r.a.createElement(l,{handler:function(e){return C(e.target.value.toLowerCase())}}),r.a.createElement("h2",null,"lis\xe4\xe4 uusi"),r.a.createElement(E,{message:J,handler:P,className:"error"}),r.a.createElement(E,{message:A,handler:B,className:"success"}),r.a.createElement(s,{formHandler:function(e){if(e.preventDefault(),0===b.length)return P("tyhj\xe4 nimi");var n=t.find(function(e){return e.name===b});if(n&&n.phone===w)return P("".concat(b," on jo luettelossa"));if(n&&window.confirm("".concat(n.name," on jo luettelossa. Korvataanko vanha numero uudella?")))return B("P\xe4ivitettiin henkil\xf6n ".concat(a.name," puhelinnumero.")),D(v,t.filter(function(e){return e.id!==n.id}),Object(c.a)({},n,{phone:w}));if(!n){var a={name:b};w.length>0&&(a.phone=w),D(p,t,a),B("Lis\xe4ttiin ".concat(a.name))}},name:b,nameHandler:function(e){return g(e.target.value)},phoneNum:w,phoneNumHandler:function(e){return H(e.target.value)}}),r.a.createElement("h2",null,"numerot"),r.a.createElement(m,{persons:I,deleteHandler:function(e){var n=e.target.id;console.log(n),console.log(t);var a,r=t.find(function(e){return e.id==n}).name;window.confirm("Poistetaanko ".concat(r,"?"))&&(a=n,d.a.delete(h(a)).then(function(e){return e.data})).then(function(e){o(t.filter(function(e){return e.id!=n})),B("Henkil\xf6 ".concat(r," poistettiin onnistuneesti."))}).catch(function(e){console.log(e),e.message.includes("404")?P("Henkil\xf6 ".concat(r," on jo poistettu.")):P("Tuntematon virhe.")})}}))};t(38);u.a.render(r.a.createElement(b,null),document.getElementById("root"))}},[[13,2,1]]]);
//# sourceMappingURL=main.f8a73eb8.chunk.js.map