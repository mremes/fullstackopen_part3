(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,n,t){e.exports=t(40)},38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(11),c=t.n(u),o=t(12),i=t(2),l=function(e){var n=e.handler;return r.a.createElement("div",null,r.a.createElement("form",null,"rajaa n\xe4ytett\xe4vi\xe4: ",r.a.createElement("input",{onChange:n})))},m=function(e){var n=e.formHandler,t=e.name,a=e.nameHandler,u=e.phoneNum,c=e.phoneNumHandler;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:t,onChange:a})," ",r.a.createElement("br",null),"puhelinnumero: ",r.a.createElement("input",{value:u,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))},s=function(e){var n=e.persons,t=e.deleteHandler;return r.a.createElement("div",null,n.map(function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.phone," ",r.a.createElement("button",{id:e.id,onClick:t},"poista"))}))},f=t(3),d=t.n(f),h=function(e){return"".concat("/api/persons","/").concat(e)},p=function(e){return d.a.post("/api/persons",e).then(function(e){return e.data})},v=function(e){return d.a.put(h(e.id),e).then(function(e){return e.data})},E=function(e){var n=e.message,t=e.handler,a=e.className;return""===n?null:(setTimeout(function(){return t("")},3e3),r.a.createElement("div",{className:a},n))},b=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),f=Object(i.a)(c,2),b=f[0],j=f[1],g=Object(a.useState)(""),O=Object(i.a)(g,2),w=O[0],H=O[1],k=Object(a.useState)(""),N=Object(i.a)(k,2),S=N[0],C=N[1],y=Object(a.useState)(""),L=Object(i.a)(y,2),J=L[0],P=L[1],T=Object(a.useState)(""),x=Object(i.a)(T,2),A=x[0],B=x[1];Object(a.useEffect)(function(){return d.a.get("/api/persons").then(function(e){return e.data}).then(function(e){return u(e)})},[]);var D=function(e,n,t){e(t).then(function(e){u(n.concat(e).sort(function(e,n){return e.id-n.id})),j(""),H(""),B("Lis\xe4ttiin ".concat(t.name))}).catch(function(e){P("Virhe: ".concat(e.response.data.message))})},I=t.filter(function(e){return e.name.toLowerCase().startsWith(S)});return I.forEach(function(e){return e.phone=e.phone||"N/A"}),r.a.createElement("div",null,r.a.createElement("h2",null,"puhelinluettelo"),r.a.createElement(l,{handler:function(e){return C(e.target.value.toLowerCase())}}),r.a.createElement("h2",null,"lis\xe4\xe4 uusi"),r.a.createElement(E,{message:J,handler:P,className:"error"}),r.a.createElement(E,{message:A,handler:B,className:"success"}),r.a.createElement(m,{formHandler:function(e){if(e.preventDefault(),0===b.length)return P("tyhj\xe4 nimi");var n=t.find(function(e){return e.name===b});if(n&&n.phone===w)return P("".concat(b," on jo luettelossa"));n&&window.confirm("".concat(n.name," on jo luettelossa. Korvataanko vanha numero uudella?"))&&D(v,t.filter(function(e){return e.id!==n.id}),Object(o.a)({},n,{phone:w}))&&B("P\xe4ivitettiin henkil\xf6n ".concat(a.name," puhelinnumero."));var a={name:b};w.length>0&&(a.phone=w),D(p,t,a)},name:b,nameHandler:function(e){return j(e.target.value)},phoneNum:w,phoneNumHandler:function(e){return H(e.target.value)}}),r.a.createElement("h2",null,"numerot"),r.a.createElement(s,{persons:I,deleteHandler:function(e){var n,a=e.target.id,r=t.find(function(e){return e.id==a}).name;window.confirm("Poistetaanko ".concat(r,"?"))&&(n=a,d.a.delete(h(n)).then(function(e){return e.data})).then(function(e){u(t.filter(function(e){return e.id!=a})),B("Henkil\xf6 ".concat(r," poistettiin onnistuneesti."))}).catch(function(e){if(e.message.includes("404"))return P("Henkil\xf6 ".concat(r," on jo poistettu."));P("Tuntematon virhe.")})}}))};t(38);c.a.render(r.a.createElement(b,null),document.getElementById("root"))}},[[13,2,1]]]);
//# sourceMappingURL=main.b6e9553c.chunk.js.map